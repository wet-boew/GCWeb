---
{
	"title": "Gestionnaire d'Invitation - Documentation",
	"language": "fr",
	"category": "Plugiciels",
	"description": "Gérer le panneau du sondage du GC",
	"tag": "invitationmanager",
	"parentdir": "invitationmanager",
	"altLangPrefix": "im-doc",
	"dateModified": "2020-10-01"
}

---
<div class="wb-prettify all-pre"></div>
<section>
<h2>Objectif</h2>
<p>Une fenêtre de panneau d’invitation personnalisable qui apparait dans les pages désignées du site internet du gouvernement du Canada incitant le visiteur à compléter un sondage.
<br />
Un sondage est une liste de questions visant à extraire des données spécifiques des individus particuliers.
</p>
</section>
<section>
<h2>Exemples pratiques</h2>
<p>Anglais:</p>
<ul>
<li><a href="im-en.html">Invitation Manager</a></li>
</ul>
<p>Français:</p>
<ul>
<li><a href="im-fr.html" hreflang="fr" lang="fr">Gestionnaire d'Invitation</a></li>
</ul>
<p>
Un panneau d’invitation contient toujours les informations suivantes – qui sont personnalisables dans le fichier im.json :
<ul>
<li>Un titre du site du sondage auquel le visiteur est invité à participer</li>
<li>Une courte description du sondage mené</li>
<li>Un bouton  “Oui” que le visiteur peut cliquer pour participer au sondage mené</li>
<li>Un bouton  “Non” que le visiteur peut cliquer pour ne pas  participer au sondage mené</li>
</ul>
</p>
</section>
<section>
<h2>Comment mettre en place</h2>
<p>Le Gestionnaire d’Invitation est un panneau middleware qui permet de gérer des sondages du site internet du gouvernement du Canada.</p>
<p>Pour mettre en place le Gestionnaire d’Invitation dans le site internet du gouvernement du Canada, on devra suivre les étapes suivantes :</p>
<ol>
<li>
<p>Ajouter un contrôle contenant la class <code>wb-popup-im</code> et un attribut nommé <code>data-wb-popup-im-path</code> contenant la valeur du chemin du fichier json de gestionnaire d’invitation. Par exemple:</p>
<pre><code>&lt;div id=&quot;gc-im-popup&quot; class=&quot;wb-popup-im&quot; data-wb-popup-im-path=&quot;http://localhost:8000/demos/invitationmanager/demo/im.json&quot;&gt;&lt;/div&gt;
	</code></pre>
</li>
<li>
<p>Mettre à jour le fichier im.json avec les données du site cible du gouvernement du Canada.</p>
<details>
	<summary>Exemple</summary>
	<pre><code>{
&quot;settings&quot;:
{
	&quot;duration-delay&quot;: 15,
	&quot;page-probability&quot;: 0.7,
	&quot;site-probability&quot;: 0.3,
	&quot;blacklist&quot;: [{&quot;url&quot; : &quot;&quot;}],
	&quot;whitelist&quot;: [{ &quot;url&quot; : &quot;^localhost\/&quot;}]
},
&quot;surveys&quot; : [
{
	&quot;id&quot; : &quot;4&quot;,
	&quot;title-en&quot; : &quot;Feedback on My Service Canada Account (MSCA)&quot;,
	&quot;title-fr&quot; : &quot;Commentaires sur Mon dossier Service Canada (MDSC)&quot;,
	&quot;body-en&quot; : &quot;&lt;p&gt;Please take a few moments to let us know about today's experience with &ltstrong&gt; My Service Canada Account (MSCA) &lt;/strong&gt;; so we can serve you better.&lt;/p&gt&lt;p class=&quot;mrgn-bttm-0&quot;&gt;Your participation is voluntary and your responses are confidential and anonymous. &lt;/p&gt;&quot;,
	&quot;body-fr&quot; : &quot;&lt;p&gt;Merci de prendre quelques minutes pour nous faire part de l'expérience que vous avez eue aujourd'hui relativement à &lt;strong&gt; Mon dossier Service Canada (MDSC)&lt;/strong&gt;, afin que nous puissions mieux vous servir&lt;/p&gt;&lt;p class=&quot;mrgn-bttm-0&quot;&gt;Votre participation est volontaire, et vos réponses sont confidentielles et anonymes.&lt;/p&gt;&quot;,
	&quot;link-en&quot; : &quot;http://www1.canada.ca/en/contact/sc_account.html?referrer=logout&quot;,
	&quot;link-fr&quot; : &quot;http://www1.canada.ca/fr/contact/mon_dossier_sc.html?referrer=logout&quot;,
	&quot;start-on&quot; : &quot;2019-04-10T00:00:00&quot;,
	&quot;end-on&quot; : &quot;2050-07-20T23:59:00&quot;,
	&quot;type&quot; : &quot;Page&quot;,
	&quot;probability&quot; : 0.25,
	&quot;yes-en&quot; : &quot;&lt;strong&gt;Yes, &lt;span class=&quot;wb-inv&quot;&gt;I will take the exit survey &lt;/span&gt; after my visit.&lt;/strong&gt;&quot;,
	&quot;yes-fr&quot; : &quot;&lt;strong&gt;Oui, &lt;span class=&quot;wb-inv&quot;&gt;je vais participer au sondage de départ &lt;/span&gt; après ma visite.&lt;/strong&gt;&quot;,
	&quot;no-en&quot; : &quot;No, &lt;span class=&quot;wb-inv&quot;&gt;I do not want to take the exit survey, &lt;/span&gt; thank you.&quot;,
	&quot;no-fr&quot; : &quot;Non, &lt;span class=&quot;wb-inv&quot;&gt;je ne veux pas participer au sondage de départ, &lt;/span&gt; merci.&quot;,
	&quot;close-en&quot; : &quot;Close: Exit survey (escape key)&quot;,
	&quot;close-fr&quot; : &quot;Fermer : Sondage de fin de visite (touche d&apos;échappement)&quot;,
	&quot;name&quot; : &quot;ESDC - MSCA Feedback Form - Thank you page&quot;,
	&quot;survey-urls&quot; : [
	{ &quot;url&quot; : &quot;localhost:8000/demos/invitationmanager/im-en.html&quot;},
	{ &quot;url&quot; : &quot;localhost:8000/demos/invitationmanager/im-fr.html&quot;}
	]
}
]
}
</code></pre>
</details>
<p>Le fichier im.json contient  les données et la configuration du gestionnaire d’invitation du GC, en ouvrent le fichier vous devrez être en mesure d’ajuster et mettre à jours les paramètres suivants :</p>
<ul>
<li><p><code>duration-delay</code> valeur qui contient le nombre minimal de jours que le visiteur pourra recevoir le panneau d’invitation en visitant le site.</p>
<p>Par exemple, entrer 15 pour quinze jours.</p>
</li>
<li><p><code>page-probability</code> valeur qui contient la probabilité que le visiteur pourra voir le panneau d’invitation au niveau de la page.</p>
<p>Par exemple, entrer 0.7 pour 70%.</p>
</li>
<li><p><code>site-probability</code> valeur qui contient la probabilité que le visiteur pourra voir le panneau d’invitation au niveau du site.    </p>
<p>Par exemple, entrer 0.3 pour 30%.</p>
</li>
<li><p><code>blacklist</code> valeur qui contient un tableau d’URL qui représente la liste noire.</p></li>
<li><p><code>whitelist</code> valeur qui contient un tableau d’URL qui représente la liste blanche.</p></li>
<li><p><code>surveys</code> valeur qui contient un tableau des objets sondages, chaque objet contient les items suivants :</p>
<ul>
<li><p><code>id</code> valeur qui contient l’identificateur du sondage (exemple “4”).</p></li>
<li><p><code>title-en</code> valeur qui contient the titre en anglais du panneau d’invitation.</p></li>
<li><p><code>title-fr</code> valeur qui contient le titre en français du panneau d’invitation.</p></li>
<li><p><code>body-en</code> valeur qui contient le texte html de la version anglaise du contenu principal du panneau d’invitation.</p></li>
<li><p><code>body-fr</code> valeur qui contient le texte html de la version française du contenu principal du panneau d’invitation.</p></li>
<li><p><code>link-en</code> valeur qui contient le lien du sondage de la version anglaise quand l’utilisateur choisi le bouton Oui.</p></li>
<li><p><code>link-fr</code> valeur qui contient le lien du sondage de la version française quand l’utilisateur choisi le bouton Oui.</p></li>
<li><p><code>start-on</code> valeur qui contient la date de début de validité du panneau d’invitation.</p></li>
<li><p><code>end-on</code> valeur qui contient la date de fin de validité du panneau d’invitation.</p></li>
<li><p><code>type</code> valeur qui contient la portée du sondage “Entire site” si le panneau d’invitation et de portée site, et “Page” si le panneau d’invitation est de portée page.</p></li>
<li><p><code>probability</code> valeur qui contient la probabilité du panneau d’invitation dans sa portée. Ce qui signifie que la somme de toutes les probabilités des panneaux d’invitation dans la même portée ne peut pas dépasser la valeur 1.</p></li>
<li><p><code>yes-en</code> valeur qui contient le texte html du contenu de la version anglaise du bouton oui du panneau d’invitation.</p></li>
<li><p><code>yes-fr</code> valeur qui contient le texte html du contenu de la version française du bouton oui du panneau d’invitation.</p></li>
<li><p><code>no-en</code> valeur qui contient le texte html du contenu de la version anglaise du bouton non du panneau d’invitation.</p></li>
<li><p><code>no-fr</code> valeur qui contient le texte html du contenu de la version française du bouton non du panneau d’invitation.</p></li>
<li><p><code>close-en</code> valeur qui contient le texte de la version anglaise de l’icône de fermeture ou la touche escape.</p></li>
<li><p><code>close-fr</code> valeur qui contient le texte de la version française de l’icône de fermeture ou la touche escape.</p></li>
<li><p><code>survey-urls</code> valeur qui contient soit un tableau de "site" URLs des sites si le sondage et de portée site, ou un tableau  de "url" URLs  des pages si le sondage est de portée page.</p></li>
</ul>
</li>
</ul>
</li>
<ul>
</section>
<section>
<h2>Comment le Gestionnaire d’Invitation fonctionne?</h2>
<p>Quand il est bien configuré, le Gestionnaire d’Invitation du GC s’exécutera en arrière-plan du site GC cible, et il est déclenché quand le visiteur entre le site web du GC. A l’entrée au site, le visiteur est évalué contre des critères spécifiques pour déterminer si, oui ou non, il est qualifié pour le panneau d’invitation.</p>
<p>Les critères du Gestionnaire d’Invitation sont basés sur l’exécution des étapes dans un certain ordre. Si à n’importe de quelle étape le visiteur est disqualifié, le reste des étapes ne seront pas exécutées et le visiteur ne sera pas qualifié pour un panneau d’invitation:</p>
<ul>
<li><p>Etape 1: JavaScript est activée dans le navigateur web du visiteur et les cookies sont permis. </p></li>
<li><p>Etape 2: Le visiteur n’a pas reçu un panneau d’invitation depuis la période indiquée dans le paramètre  <code>duration-delay</code>. (Exemple: les derniers 15 jours)</p></li>
<li><p>Etape 3: Un nombre aléatoire est généré pour la portée du visiteur  (portée Page ou portée Site wide).</p></li>
<li><p>Etape 4: Est-ce que la page web spécifique visitée est qualifiée pour les sondages au moment où la page web est affichée ? (les paramètres <code>start-on</code> et <code>end-on</code>)</p></li>
<li><p>Etape 5: Est-ce que la page visitée fait partie du Whitelist et ne fait pas partie du Blacklist des pages du GC?</p></li>
<li><p>Etape 6: La probabilité de la page/le site du GC du panneau d’invitation est calculée.</p></li>
<li><p>Etape 7: Un nombre aléatoire est généré pour voir si le visiteur est qualifié pour le panneau d’invitation en relation avec la probabilité calculée.</p></li>
<li><p>Etape 8: Afficher le panneau d’invitation.</p></li>
</ul>
<p>Si le visiteur qualifie, un panneau d’invitation apparaitra dans son navigateur web lui incitant à accepter ou refuser la participation au sondage. En plus, un time stamp est enregistré dans le stockage local pour identifier que le visiteur a reçu le panneau.</p>
<p>Si le visiteur ne qualifie pas, rien ne se passera et le visiteur ne recevra pas de panneau d’invitation.</p>
</section>
<section>
<h2> Code source</h2>
<p><a href="https://github.com/wet-boew/GCWeb/tree/master/src/plugins/invitationmanager">Code source dans GitHub du plugin Gestionnaire d’Invitation</a></p>
</section>
